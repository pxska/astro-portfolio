---
import { Image } from "astro:assets";
import heroImage from "@assets/kristjan.jpeg";
import Layout from "@layouts/Layout.astro";
import Card from "@components/Card.astro";
import { sortPosts } from "@utils/utils";
import ArrowUpRight from "node_modules/lucide-astro/dist/ArrowUpRight.astro";
import Lines from "@components/Lines.astro";
import CornerLeftUp from "node_modules/lucide-astro/dist/CornerLeftUp.astro";
import Wrapper from "@components/Wrapper.astro";

const posts = sortPosts(
  await Astro.glob("../pages/craft/*.mdx")
);
---

<script>
  import { generateRandomHexCode } from "@utils/utils";

  const heroImage = document.getElementById("hero-image");

  document.addEventListener("DOMContentLoaded", () => {
    document.documentElement.style.setProperty(
      "--randomized-hex-value",
      generateRandomHexCode()
    );
  });

  heroImage.addEventListener("click", () => {
    document.documentElement.style.setProperty(
      "--randomized-hex-value",
      generateRandomHexCode()
    );
  });
</script>

<Layout title="Kristjan Poska â€“ Product Designer">
  <Wrapper>
    <nav class="flex items-center justify-between">
      <a
        class="transition-colors hover:text-theme-orange"
        href="/">Kristjan Poska</a
      >

      <ul role="list" class="flex items-center gap-4">
        <li>
          <a
            class="transition-colors hover:text-theme-orange"
            href="mailto:kristjanposka@gmail.com">Contact</a
          >
        </li>
        <li class="group">
          <a
            class="transition-colors group-hover:text-theme-orange"
            href="https://read.cv/poska"
            target="_blank"
            >Resume
            <ArrowUpRight
              class="-ml-0.5 inline h-3 w-3 align-text-top"
            />
          </a>
        </li>
      </ul>
    </nav>

    <main class="mx-auto mt-8">
      <div
        class="group relative select-none hover:cursor-pointer"
        id="hero-image">
        <Lines />

        <Image
          src={heroImage}
          alt="Kristjan Poska taking a picture of himself in a reflection."
        />
      </div>

      <div
        class="mt-2 flex gap-1 rounded-xl text-xs text-neutral-500"
        id="hero-image">
        <CornerLeftUp class="h-3 w-3" /> Click on the image
        to change colors!
      </div>

      <header class="mt-8">
        <p>
          A passionate product designer based in Tallinn,
          Estonia. Working on UX/UI projects with the power
          of front-end development in my rucksack.
          Comfortable using TypeScript, React and
          TailwindCSS on the development side and Figma plus
          my creative-side of the brain on the design side.
        </p>
      </header>

      <section class="mt-8 flex flex-col gap-2">
        <Card
          date="May 2024"
          description="An ever-evolving project of different UI replications"
          href="/craft/playground"
        />
        {
          posts.map((post) => {
            const { description, date } = post.frontmatter;

            return (
              <Card
                date={date}
                description={description}
                href={post.url}
              />
            );
          })
        }
      </section>
    </main>
  </Wrapper>
</Layout>
